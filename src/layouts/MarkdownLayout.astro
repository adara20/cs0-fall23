---
// Used by .md pages (e.g. syllabus.md) via the `layout` frontmatter key.
// Wraps the content in prose styles for readable long-form text.
import Layout from './Layout.astro';

interface Props {
  frontmatter: { title: string; description?: string };
}
const { frontmatter } = Astro.props;
---

<Layout title={frontmatter.title} description={frontmatter.description}>
  <!-- Scroll progress bar -->
  <div
    id="scroll-progress"
    class="fixed top-0 left-0 h-0.5 bg-blue-500 z-50 transition-none"
    style="width: 0%"
    aria-hidden="true"
  ></div>

  <article class="prose prose-slate max-w-none
    prose-headings:font-semibold prose-headings:tracking-tight
    prose-h1:text-3xl prose-h2:text-xl prose-h2:mt-10 prose-h2:mb-3
    prose-a:text-blue-600 prose-a:no-underline hover:prose-a:underline
    prose-code:text-sm prose-code:bg-slate-100 prose-code:rounded prose-code:px-1 prose-code:py-0.5 prose-code:font-normal prose-code:before:content-none prose-code:after:content-none
    prose-table:text-sm">
    <slot />
  </article>

  <script>
    const bar = document.getElementById('scroll-progress');
    if (bar) {
      const update = () => {
        const scrolled = window.scrollY;
        const total    = document.documentElement.scrollHeight - window.innerHeight;
        bar.style.width = total > 0 ? `${(scrolled / total) * 100}%` : '0%';
      };
      window.addEventListener('scroll', update, { passive: true });
      update();
    }
  </script>
</Layout>
